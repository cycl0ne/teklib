<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<title>teklib</title>
		<style type="text/css">
			<!--
				body { background-color: #fff; color: #000; }
				a:link { color: #00e; }
				a:visited { color: #44d; }
				a:hover { color: #700; background-color: #ffb; }
				body,td,dfn,div,li { font-family: Arial, Helvetica,
					Geneva, sans-serif; }
				div.block, li { margin-bottom: 0.4em; }
				dfn { font-weight: bold; }
				pre { background-color: #eef7df; border-style: solid;
					border-width: 1px; padding: 0.4em; }
				td { padding: 2px; }
				td.noborder { padding: 0.1em 0.4em;
					background-color: #fceed2; }
				table.noborder { border-style: none; border-spacing: 4px;
					margin-bottom: 0.4em; }
				li.soft { list-style-type: none; }
				ul { margin-left: 0cm; padding: 0cm;
					list-style-position: inside; }
				table.head { background-color: #d7d7f5; }
			//-->
		</style>
	</head>
	<body>
		<hr><a name="INDEX"></a><table width="100%" class="head"><tr><td width="100%"><strong>teklib : Index</strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<h2>
				TEKlib / Link library documentation
			</h2>
			<div class="block">
				By Timm S. M&#252;ller -
				Copyright &#169; 2005 TEK neoscientists. All rights reserved.
			</div>
			<hr>
			<h3>
				Overview
			</h3>
			<div class="block">
				The majority of TEKlib's functionality is located in shared modules.
				The link libraries provide functions to operate on elementary
				datatypes such as 
				<a href="#Lists">Lists</a>, 
				<a href="#Handles">Handles</a> and <a href="#Tagitems">Tagitems</a>, and they
				help to ease the <a href="#Setup">Setup</a> of applications and modules.
			</div>
			<blockquote>
				<table class="noborder">
					<tr>
						<td class="noborder">
							<a href="#Setup">Setup</a> 
						</td>
						<td class="noborder">
							Setup of applications and modules
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#Lists">Lists</a> 
						</td>
						<td class="noborder">
							Lists and nodes
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#Handles">Handles</a> 
						</td>
						<td class="noborder">
							Generic object headers with destructor
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#Tagitems">Tagitems</a> 
						</td>
						<td class="noborder">
							Key/value pairs
						</td>
					</tr>
				</table>
			</blockquote>
			<h3>
				Libraries
			</h3>
			<blockquote>
				<ul>
					<li class="bullets">
						<code>tek</code> -
						Common functions for elementary datatypes and module <a href="#Setup">setup</a>,
						usually linked to modules
					</li>
					<li class="bullets">
						<code>tekc</code> -
						Additionally provides <a href="#TEKCreate">TEKCreate</a>. This library is linked
						to applications that wish to embed TEKlib, but do not use
						<a href="#TEKMain">TEKMain</a> as their application entrypoint.
					</li>
					<li class="bullets">
						<code>tekcmain</code> -
						Additionally resolves a platform-specific <code>main()</code> entrypoint
						and calls <a href="#TEKMain">TEKMain</a>. This is the typical C/C++ language
						startup of a freestanding TEKlib application.
					</li>
					<li class="bullets">
						<code>tekmain</code> -
						This library is based on <code>tekc</code> and additionally defines an
						entrypoint for applications on platforms on which TEKlib constitutes
						the operating system. This is the case on the Playstation 2
						architecture, for example.
					</li>
					<li class="bullets">
						<code>tekwmain</code> -
						Same as tekcmain, but <code>WinMain()</code> is resolved instead of
						<code>main()</code>. This is a special flavour for windowed applications
						on the Windows platform.
					</li>
				</ul>
			</blockquote>
		</div>
		<hr><a name="Setup"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#Setup">Setup</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="block">
				TEKlib can be embedded into regular applications using <a href="#TEKCreate">TEKCreate</a> and
				provide an entrypoint for a freestanding C/C++ application, <a href="#TEKMain">TEKMain</a>:
			</div>
			<h3>
				Function overview
			</h3>
			<blockquote>
				<table class="noborder">
					<tr>
						<td class="noborder">
						</td>
						<td class="noborder">
							<strong>Entrypoints and startup</strong> 
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#TEKMain">TEKMain</a> 
						</td>
						<td class="noborder">
							Entrypoint for a freestanding application
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#TEKCreate">TEKCreate</a> 
						</td>
						<td class="noborder">
							Create an initial TEKlib context
						</td>
					</tr>
					<tr>
						<td class="noborder">
						</td>
						<td class="noborder">
							<strong>Support functions for module initialization</strong> 
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#TNewInstance">TNewInstance</a> 
						</td>
						<td class="noborder">
							Allocate a module instance
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#TFreeInstance">TFreeInstance</a> 
						</td>
						<td class="noborder">
							Free a module instance
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#TInitVectors">TInitVectors</a> 
						</td>
						<td class="noborder">
							Init a module function vector table
						</td>
					</tr>
				</table>
			</blockquote>
		</div>
		<hr><a name="Tagitems"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#Tagitems">Tagitems</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<h3>
				Function overview
			</h3>
			<blockquote>
				<table class="noborder">
					<tr>
						<td class="noborder">
							<a href="#TGetTag">TGetTag</a> 
						</td>
						<td class="noborder">
							Get tag value from a list of tag items
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#TForEachTag">TForEachTag</a> 
						</td>
						<td class="noborder">
							Call function for each item in a taglist
						</td>
					</tr>
				</table>
			</blockquote>
			<h3>
				Introduction
			</h3>
			<div class="block">
				One of the most versatile data structures in TEKlib are arrays of
				key/value pairs. These pairs are called <em>tags</em>, hence the term
				<em>tagitem</em> for the resulting data structure, and <em>taglist</em> for an
				array composed of tagitems:
			</div>
			<blockquote>
<pre>
struct TTagItem my_taglist[5] =
{
    MY_Points, vertices,
    MY_NumPoints, (TTAG) 3,
    MY_Color, (TTAG) 0xff0000,
    MY_Name, "Red triangle",
    TTAG_DONE
};
</pre>
			</blockquote>
			<div class="block">
				The <code>TTAG</code> type has the guaranteed ability to carry pointers on all
				architectures. This allows, in essence, to transport any kind of data
				in tagitems. The <code>tti_Tag</code> field can contain user codes and control
				codes. User codes are identified by their combination with
				<code>TTAG_USER</code>, for example
			</div>
			<blockquote>
<pre>
#define MY_Points    (TTAG_USER + 0x10001)
#define MY_NumPoints (TTAG_USER + 0x10002)
#define MY_Color     (TTAG_USER + 0x10003)
#define MY_Name      (TTAG_USER + 0x10004)
</pre>
			</blockquote>
			<div class="block">
				A tag not containing <code>TTAG_USER</code> is considered a control tag, which
				determines how a single item is to be interpreted, or how an array
				of tagitems should be traversed. The meanings of control tags are:
			</div>
			<blockquote>
				<div class="block">
					<code>TTAG_DONE</code> 
				</div>
				<blockquote>
					<div class="block">
						End of the taglist; traversal stops at this item.
					</div>
				</blockquote>
				<div class="block">
					<code>TTAG_IGNORE</code> 
				</div>
				<blockquote>
					<div class="block">
						<code>tti_Value</code> of this item is to be ignored.
					</div>
				</blockquote>
				<div class="block">
					<code>TTAG_SKIP</code> 
				</div>
				<blockquote>
					<div class="block">
						The current item plus the number of items in
						<code>tti_Value</code> is to be ignored.
					</div>
				</blockquote>
				<div class="block">
					<code>TTAG_MORE</code> 
				</div>
				<blockquote>
					<div class="block">
						<code>tti_Value</code> points to another taglist, at which
						traversal is to be continued. The control does not
						return to the current item.
					</div>
				</blockquote>
				<div class="block">
					<code>TTAG_GOSUB</code> 
				</div>
				<blockquote>
					<div class="block">
						<code>tti_Value</code> points to another taglist, which is
						traversed recursively. After traversal, control
						returns to the current item.
					</div>
				</blockquote>
			</blockquote>
			<div class="block">
				Once a function is designed to accept a taglist argument, it becomes
				more invulnerable towards future API changes. By assigning a default
				value to each tag argument, any number of new taglist arguments can
				be added to the function, without ever breaking existing code:
			</div>
			<blockquote>
<pre>
TVOID cool_func(TTAGITEM *tags)
{
    TINT numv = (TINT) TGetTag(tags, MY_NumPoints, (TTAG) 3);
    TFLOAT *v = (TFLOAT *) TGetTag(tags, MY_Points, default_vertices);
    TSTRPTR n = (TSTRPTR) TGetTag(tags, MY_Name, "Default Triangle");
    TUINT rgb = (TUINT) TGetTag(tags, MY_Color, (TTAG) 0xff0000);
    /* ... */
}
</pre>
			</blockquote>
			<div class="block">
				Notes:
			</div>
			<blockquote>
				<ul>
					<li class="bullets">
						As the sizes of <code>TFLOAT</code> and <code>TDOUBLE</code> are currently undefined in
						TEKlib, they should be transported as pointer references. Aside from
						pointers, only integers (up to the size of <code>TUINT</code>) should be placed
						into <code>tti_Value</code> directly.
					</li>
				</ul>
			</blockquote>
		</div>
		<hr><a name="Handles"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#Handles">Handles</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<h3>
				Function overview
			</h3>
			<blockquote>
				<table class="noborder">
					<tr>
						<td class="noborder">
							<a href="#TDestroy">TDestroy</a> 
						</td>
						<td class="noborder">
							Invoke destructor on a generic handle
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#TDestroyList">TDestroyList</a> 
						</td>
						<td class="noborder">
							Unlink and invoke destructor on handles in a list
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#TForEachTag">TForEachTag</a> 
						</td>
						<td class="noborder">
							Find a named handle in a list
						</td>
					</tr>
				</table>
			</blockquote>
			<h3>
				Introduction
			</h3>
			<div class="block">
				Handles are an extension to regular nodes, and as such they can be
				linked into regular <a href="#Lists">Lists</a>. Handles are headed by a node structure
				and carry an additional data field and a pointer to a destroy
				function, from now on also referred to as a <em>destructor</em>:
			</div>
			<blockquote>
<pre>
struct THandle
{
    struct TNode thn_Node;
    TAPTR thn_Data;
    TDFUNC thn_DestroyFunc;
};
</pre>
			</blockquote>
			<div class="block">
				Many TEKlib objects are headed by a handle structure, or use the
				handle's data pointer to hide their inner workings from the user.
				By convention, the destructor is a function that knows how to
				dispose the object and data that might be associated with it.
				The destructor is invoked by passing the handle to <a href="#TDestroy">TDestroy</a>.
			</div>
			<blockquote>
<pre>
struct Foo
{
    struct THandle foo_Handle;
    struct Stuff foo_Stuff;
};
</pre>
			</blockquote>
			<div class="block">
				A destructor for this kind of object may look like this:
			</div>
			<blockquote>
<pre>
TCALLBACK TVOID
destroy_foo(struct Foo *object)
{
    close_things(&#038;object-&#062;foo_Stuff);
    TFree(object);
}
</pre>
			</blockquote>
			<div class="block">
				This function must be defined and declared using <code>TCALLBACK</code>, as
				this may be the only way for hiding compiler- or platform-specific
				calling conventions for a function that may be invoked outside the
				scope of the current library or application. If you don't want to get
				a compiler warning from the usage of the mismatching datatype, you can
				conveniently place the function into a handle using a typecast, which
				is aware of the <code>TCALLBACK</code> definition also:
			</div>
			<blockquote>
<pre>
handle-&#062;thn_DestroyFunc = (TDFUNC) destroy_foo;
</pre>
			</blockquote>
			<div class="block">
				By convention, a destructor cleans up as much of the object as
				possible, i.e. it usually de-initializes and frees it, but this
				is nowhere strictly regulated.
			</div>
			<div class="block">
				The data field may be a pointer to arbitrary user data, but it is
				most commonly used for a pointer to a C string containing a name
				for the object at hand. Handles conforming to this convention can
				be searched for in <a href="#Lists">Lists</a> using <a href="#TFindHandle">TFindHandle</a>.
			</div>
			<div class="block">
				See also: <a href="#Lists">Lists</a> 
			</div>
		</div>
		<hr><a name="Lists"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#Lists">Lists</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<h3>
				Function overview
			</h3>
			<blockquote>
				<table class="noborder">
					<tr>
						<td class="noborder">
							<a href="#TAddHead">TAddHead</a> 
						</td>
						<td class="noborder">
							Link a node to the head of a list
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#TAddTail">TAddTail</a> 
						</td>
						<td class="noborder">
							Link a node to the tail of a list
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#TInitList">TInitList</a> 
						</td>
						<td class="noborder">
							Init a list header structure
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#TInsert">TInsert</a> 
						</td>
						<td class="noborder">
							Insert a node into a list
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#TNodeUp">TNodeUp</a> 
						</td>
						<td class="noborder">
							Move a node one position up in a list
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#TRemHead">TRemHead</a> 
						</td>
						<td class="noborder">
							Unlink a node from the head of a list
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#TRemove">TRemove</a> 
						</td>
						<td class="noborder">
							Unlink a node from whatever list it is linked to
						</td>
					</tr>
					<tr>
						<td class="noborder">
							<a href="#TRemTail">TRemTail</a> 
						</td>
						<td class="noborder">
							Unlink a node from the tail of a list
						</td>
					</tr>
				</table>
			</blockquote>
			<h3>
				Iterator
			</h3>
			<div class="block">
				A forward iterator for a TEKlib list may look like this:
			</div>
			<blockquote>
<pre>
struct TNode *next, *node = list-&#062;tlh_Head;
for (; (next = node-&#062;tln_Succ); node = next)
{
    /*
     * you can operate on 'node' here, remove it safely,
     * insert past it, as well as 'break' out from and
     * 'continue' the loop.
     */
}
</pre>
			</blockquote>
			<h3>
				Introduction
			</h3>
			<div class="block">
				Lists and nodes are among the most common data structures in TEKlib.
				The node structure is normally heading a user's own data structure. It
				is also formally extended in numerous ways, such as for <a href="#Handles">Handles</a> 
				and module objects.
			</div>
			<div class="block">
				TEKlib lists are doubly-linked, with a header that acts as a marker
				for the head and the tail of the list. When a list header is newly
				initialized, its layout in memory looks like this:
			</div>
			<blockquote>
<pre>
list:          ,----&#062; ,--------------.
               |  ,-- |     head     |
               |  `-&#062; |     tail     | --&#062; TNULL
               `----- |   tailpred   |
                      `--------------'
</pre>
			</blockquote>
			<div class="block">
				Initially, the head field contains a pointer to the tail and
				tailpred fields inside the header, which could be interpreted as a
				node also:
			</div>
			<blockquote>
<pre>
list:          ,----&#062; ,--------------.
               |  ,-- |     head     |
               |  `-&#062; | ,----------. |
               |      | |   succ   | | --&#062; TNULL
               `----- | |   pred   | |
                      | `----------' |
                      `--------------'
</pre>
			</blockquote>
			<div class="block">
				From that perspective, the list header contains a <em>Null node</em>, i.e.
				one whose successor is <code>TNULL</code>. This picture remains consistent
				after the insertion of the first real node:
			</div>
			<blockquote>
<pre>
list:          ,----&#062; ,--------------.
               |  ,-- |     head     |
               |  |   | ,----------. | &#060;----------.
               |  |   | |   succ   | | --&#062; TNULL  |
               |  |   | |   pred   | |            |
               |  |   | `----------' |            |
               |  |   `--------------'            |
node:          |  `---&#062; ,----------.              |
               |        |   succ   | -------------'
               `------- |   pred   |
                        `----------'
</pre>
			</blockquote>
			<div class="block">
				If we were iterating the list, we came from list-&#062;head to the first
				real node, then from node-&#062;succ to a Null node (whose successor is
				<code>TNULL</code>), which in turns indicates the end of the list.
			</div>
			<div class="block">
				The same works when the list is iterated backwards. node-&#062;pred
				points to the head and tail fields inside the header, which can
				be interpreted as a node also:
			</div>
			<blockquote>
<pre>
list:                 ,--------------.
               ,----&#062; | ,----------. |
               |      | |   succ   | |
               |      | |   pred   | | --&#062; TNULL
               |      | `----------' |
               |  ,-- |   tailpred   |
               |  |   `--------------'
node:          |  `---&#062; ,----------.
               |        |   succ   |
               `------- |   pred   |
                        `----------'
</pre>
			</blockquote>
			<div class="block">
				The list header fulfills the requirements of both a list's heading
				and trailing end marker, depending on whether it is accessed as a
				first node's predecessor, or as a last node's successor.
			</div>
			<div class="block">
				See also: <a href="#Handles">Handles</a> 
			</div>
		</div>
		<hr><a name="TEKCreate"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TEKCreate">TEKCreate</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TEKCreate - Create an initial TEKlib context
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
<pre>
basetask = TEKCreate(tags)
TAPTR                TTAGITEM*
</pre>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						This function creates an initial TEKlib context. All further
						functionality is related to and derived from this handle.
					</div>
					<div class="block">
						This kind of startup allows for integratation of TEKlib into
						foreign environments, and you can use it for writing your own
						startup library.
					</div>
					<div class="block">
						Once you are finished using TEKlib, the basetask handle is
						destroyed with a call to <a href="#TDestroy">TDestroy</a>.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								tags
							</td>
							<td class="noborder">
								Pointer to an array of tag items, or TNULL
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>TAGS</dfn>
				<blockquote>
					<div class="block">
						TExecBase_ArgC, (TUINT)
					</div>
					<blockquote>
						<div class="block">
							Submit a <code>main()</code> entrypoint's number of arguments to the
							framework. If applicable, argc/argv will be made available
							in a named atom <code>sys.argv</code>. See also <a href="util.html#TGetArgC">util:TGetArgC</a>.
							Default: undefined
						</div>
					</blockquote>
					<div class="block">
						TExecBase_ArgV, (TSTRPTR)
					</div>
					<blockquote>
						<div class="block">
							Submit a <code>main()</code> entrypoint's array of arguments to the
							framework. If applicable, argc/argv will be made available
							in a named atom <code>sys.argv</code>. See also <a href="util.html#TGetArgV">util:TGetArgV</a>.
							Default: undefined
						</div>
					</blockquote>
					<div class="block">
						TExecBase_RetValP, (TUINT *)
					</div>
					<blockquote>
						<div class="block">
							Submit a pointer to a possible return value. The pointer will
							be made available in a named atom <code>sys.returnvalue</code>. The
							variable being pointed to should be initialized with zero.
							See also <a href="util.html#TSetRetVal">util:TSetRetVal</a> for setting the return value in an
							application. Default: undefined
						</div>
					</blockquote>
					<div class="block">
						TExecBase_ModInit, (struct TInitModule *)
					</div>
					<blockquote>
						<div class="block">
							Submit a TNULL-terminated array of internal startup modules
							to your application. This allows you to link modules to
							applications statically. Internal modules will be looked up
							first, i.e. before any of the search strategies for modules
							from disk apply. Default: TNULL
						</div>
					</blockquote>
					<div class="block">
						TExecBase_ProgDir, (TSTRPTR)
					</div>
					<blockquote>
						<div class="block">
							Override the path to TEKlib's logical <code>PROGDIR:</code> volume, which
							by default resembles to the directory in which the application
							resides. Default: the application directory
						</div>
					</blockquote>
					<div class="block">
						TExecBase_ModDir, (TSTRPTR)
					</div>
					<blockquote>
						<div class="block">
							Some platforms support this tag argument for setting a global
							search path for modules, overriding the hardcoded internal
							default (e.g. <code>/opt/tek/mod</code>). Local modules (those in
							<code>PROGDIR:mod</code>) are not affected, as those will always be
							probed first. Default: platform-specific.
						</div>
					</blockquote>
					<div class="block">
						TExecBase_SysDir, (TSTRPTR)
					</div>
					<blockquote>
						<div class="block">
							Some platforms support this tag argument for setting a global
							system directory, overriding the hardcoded internal default
							(e.g. <code>C:\Programs\Common Shared Files\tek</code>), which also
							resembles to the logical <code>SYS:</code> volume in TEKlib's filesystem
							namespace. Default: platform-specific.
						</div>
					</blockquote>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>RESULTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								basetask
							</td>
							<td class="noborder">
								initial context handle
							</td>
						</tr>
					</table>
					<div class="block">
						If initialization fails, this function returns TNULL. If successful,
						this function returns an initial task handle, referring to the
						process/thread context in which the caller is running. The handle is
						being destroyed with a call to <a href="#TDestroy">TDestroy</a>, which will clean up and
						free all resources.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>NOTES</dfn>
				<blockquote>
					<ul>
						<li class="bullets">
							It is platform-specific whether you are allowed to create more
							than one instances of TEKlib per application. Most currently
							supported platforms allow this, but this would be something
							unadvisable to depend on.
						</li>
						<li class="bullets">
							Applications running in the Unix environment depend on the argv
							vector to determine their logical program directory. You are advised
							to pass the tags TExecBase_ArgC and TExecBase_ArgV. If unavailable,
							use TExecBase_ProgDir to supply this information directly.
						</li>
						<li class="bullets">
							Not all platforms support this kind of startup, since a fully-fledged
							TEKlib context cannot be described by the basetask handle alone. For
							example, if associating thread-specific data would require a
							manipulated stack layout, then it's possible that the respective
							platform can only provide <a href="#TEKMain">TEKMain</a>.
						</li>
					</ul>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TEKMain">TEKMain</a>, <a href="#Setup">Setup</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TEKMain"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TEKMain">TEKMain</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TEKMain - TEKlib application entrypoint
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
<pre>
TTASKENTRY TVOID TEKMain(TAPTR task)
</pre>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						In a freestanding application, TEKlib resolves a platform-specific
						entrypoint like <code>main()</code> or intercepts the entrypoint provided by the
						platform's binary loader, performs initializations with reasonable
						defaults, and then enters <a href="#TEKMain">TEKMain</a>.
					</div>
					<div class="block">
						Resources such as argc, argv, return values and other properties
						are made available to the framework in named atoms. See <a href="#TEKCreate">TEKCreate</a>,
						<a href="util.html#TGetArgC">util:TGetArgC</a>, 
						<a href="util.html#TGetArgV">util:TGetArgV</a>, <a href="util.html#TSetRetVal">util:TSetRetVal</a> for details.
					</div>
					<div class="block">
						If you need more control over the startup procedure then you can
						write your own startup library using <a href="#TEKCreate">TEKCreate</a>.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>EXAMPLE</dfn>
				<blockquote>
					<div class="block">
						Unless you write a more convenient C++ startup library of your own,
						the TEKlib application entrypoint for a C++ application would look
						like this:
					</div>
					<blockquote>
<pre>
extern "C" TTASKENTRY TVOID TEKMain(TAPTR task)
{
    /* ... */
}
</pre>
					</blockquote>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TEKCreate">TEKCreate</a>, <a href="#Setup">Setup</a>, <a href="exec.html#TGetExecBase">exec:TGetExecBase</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TAddHead"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TAddHead">TAddHead</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TAddHead - Add a node at the head of a list
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
<pre>
TAddHead(list,  node)
         TLIST* TNODE*
</pre>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						Add a node at the head of a doubly linked list.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								list
							</td>
							<td class="noborder">
								Pointer to a list header
							</td>
						</tr>
						<tr>
							<td class="noborder">
								node
							</td>
							<td class="noborder">
								Pointer to a node to be added
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TAddTail">TAddTail</a>, 
						<a href="#TInitList">TInitList</a>, <a href="#Lists">Lists</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TAddTail"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TAddTail">TAddTail</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TAddTail - Add node at the tail of a list
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
					<div class="block">
						TAddTail(list,  node)
						 TLIST* TNODE*
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						Add a node at the tail of a doubly linked list.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								list
							</td>
							<td class="noborder">
								Pointer to a list header
							</td>
						</tr>
						<tr>
							<td class="noborder">
								node
							</td>
							<td class="noborder">
								Pointer to a node to be added
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TAddHead">TAddHead</a>, 
						<a href="#TInitList">TInitList</a>, <a href="#Lists">Lists</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TRemove"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TRemove">TRemove</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TRemove - Unlink a node from a list
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
					<div class="block">
						TRemove(node)
						 TNODE*
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						Unlink a node from whatever list it is linked to.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								node
							</td>
							<td class="noborder">
								Pointer to a node to be removed
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>NOTES</dfn>
				<blockquote>
					<ul>
						<li class="bullets">
							Using this function with a node not being part of a list will
							be fatal.
						</li>
					</ul>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TRemHead">TRemHead</a>, 
						<a href="#TRemTail">TRemTail</a>, 
						<a href="#TInitList">TInitList</a>, <a href="#Lists">Lists</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TRemHead"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TRemHead">TRemHead</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TRemHead - Unlink the first node from a list.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
<pre>
node = TRemHead(list)
TNODE*          TLIST*
</pre>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						Unlink and return the first node from a doubly linked list.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								list
							</td>
							<td class="noborder">
								Pointer to a list header
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>RESULTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								node
							</td>
							<td class="noborder">
								Pointer to the node being unlinked from the list, or TNULL
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TRemTail">TRemTail</a>, 
						<a href="#TRemove">TRemove</a>, 
						<a href="#TInitList">TInitList</a>, <a href="#Lists">Lists</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TRemTail"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TRemTail">TRemTail</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TRemTail - Unlink the last node from a list
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
<pre>
node = TRemTail(list)
TNODE*          TLIST*
</pre>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						Unlink and return the last node from a doubly linked list.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								list
							</td>
							<td class="noborder">
								Pointer to a list header
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>RESULTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								node
							</td>
							<td class="noborder">
								Pointer to the node being unlinked from the list, or TNULL
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TRemHead">TRemHead</a>, 
						<a href="#TRemove">TRemove</a>, 
						<a href="#TInitList">TInitList</a>, <a href="#Lists">Lists</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TDestroy"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TDestroy">TDestroy</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TDestroy - Invoke destructor on a handle
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
<pre>
TDestroy(handle)
         THNDL*
</pre>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						Destroy a generic handle by calling its destructor. If either
						handle or <code>handle-&#062;thn_DestroyFunc</code> is TNULL then nothing will happen.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								handle
							</td>
							<td class="noborder">
								Pointer to a generic object handle
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>NOTES</dfn>
				<blockquote>
					<ul>
						<li class="bullets">
							No memory whatsoever will be freed by this function outside the
							destructor.
						</li>
					</ul>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TDestroyList">TDestroyList</a>, <a href="#TFindHandle">TFindHandle</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TInitList"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TInitList">TInitList</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TInitList - Prepare list header
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
<pre>
TInitList(list)
          TLIST*
</pre>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						Prepare a list header structure. After initialization the list
						will be empty and ready for use.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								list
							</td>
							<td class="noborder">
								Pointer to a list structure
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TAddHead">TAddHead</a>, 
						<a href="#TAddTail">TAddTail</a>, 
						<a href="#TRemove">TRemove</a>, 
						<a href="#TRemHead">TRemHead</a>, 
						<a href="#TRemTail">TRemTail</a>, <a href="#Lists">Lists</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TInsert"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TInsert">TInsert</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TInsert - Insert a node into a list
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
<pre>
TInsert(list,  node,  prednode)
        TLIST* TNODE* TNODE*
</pre>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						Insert a node into a list after prednode. If prednode
						is TNULL, then this function is equivalent to <a href="#TAddTail">TAddTail</a>.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								list
							</td>
							<td class="noborder">
								Pointer to a list to insert to
							</td>
						</tr>
						<tr>
							<td class="noborder">
								node
							</td>
							<td class="noborder">
								Pointer to a node to insert
							</td>
						</tr>
						<tr>
							<td class="noborder">
								prednode
							</td>
							<td class="noborder">
								Pointer to a node in the list after which to insert
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TRemove">TRemove</a>, 
						<a href="#TAddTail">TAddTail</a>, 
						<a href="#TAddHead">TAddHead</a>, <a href="#Lists">Lists</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TNodeUp"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TNodeUp">TNodeUp</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TNodeUp - Move a node upwards
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
<pre>
TNodeUp(node)
        TNODE*
</pre>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						Move a node one position towards the head of the list it is linked
						to. In other words, if the node is not already at the head of the
						list, swap its position with its predecessor.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								node
							</td>
							<td class="noborder">
								Pointer to a node
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>NOTES</dfn>
				<blockquote>
					<div class="block">
						Using this function with a node not being part of a list will
						be fatal.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TRemove">TRemove</a>, 
						<a href="#TAddTail">TAddTail</a>, 
						<a href="#TAddHead">TAddHead</a>, <a href="#Lists">Lists</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TGetTag"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TGetTag">TGetTag</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TGetTag - Get tag value from a tag list
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
<pre>
value = TGetTag(taglist,  tag,  defvalue)
TTAG            TTAGITEM* TUINT TTAG
</pre>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						Parse a list of tag items and return the value associated with
						the first matching tag identifier. If the specified tag is not
						contained in the list, then the default value is returned.
					</div>
					<div class="block">
						A taglist is a pointer to an array of tagitems. Each tagitem is
						composed from a tag/value pair. Many TEKlib functions accept
						a taglist argument for making them more robust for future
						extensions.
					</div>
					<div class="block">
						The tag field can contain control tags and user tags. User tags
						must be combined with the TTAG_USER flag. Control tags are:
					</div>
					<div class="block">
						TTAG_DONE
					</div>
					<blockquote>
						<div class="block">
							This is the last entry of the array. traversal
							stops here.
						</div>
					</blockquote>
					<div class="block">
						TTAG_IGNORE
					</div>
					<blockquote>
						<div class="block">
							This item is being ignored.
						</div>
					</blockquote>
					<div class="block">
						TTAG_SKIP
					</div>
					<blockquote>
						<div class="block">
							Skip this item plus the number of items contained in value.
						</div>
					</blockquote>
					<div class="block">
						TTAG_MORE
					</div>
					<blockquote>
						<div class="block">
							Value is a pointer to another array oftagitems.
							Traversal is continued at the new array, and does not return.
						</div>
					</blockquote>
					<div class="block">
						TTAG_GOSUB
					</div>
					<blockquote>
						<div class="block">
							Value is a pointer to another array of tagitems. After return
							from the sub-array, traversal continues here.
						</div>
					</blockquote>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								taglist
							</td>
							<td class="noborder">
								Pointer to an array of tag items
							</td>
						</tr>
						<tr>
							<td class="noborder">
								tag
							</td>
							<td class="noborder">
								Tag to be queried
							</td>
						</tr>
						<tr>
							<td class="noborder">
								defvalue
							</td>
							<td class="noborder">
								Default value
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>RESULTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								value
							</td>
							<td class="noborder">
								Value associated with the tag in the taglist, otherwise the default value
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>NOTES</dfn>
				<blockquote>
					<ul>
						<li class="bullets">
							The <code>TTAG</code> type is capable of carrying pointers. This allows, in
							essence, to transport any kind of data in tag items, even on 64bit
							architectures. An unfortunate side-effect is that assigning a value to
							<code>tti_Value</code> may require a typecast to <code>TTAG</code> for getting rid of
							complaints from the compiler.
						</li>
					</ul>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TForEachTag">TForEachTag</a>, <a href="#Tagitems">Tagitems</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TDestroyList"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TDestroyList">TDestroyList</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TDestroyList - Destroy handles in a list
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
<pre>
TDestroyList(list)
             TLIST*
</pre>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						Unlinks all nodes from a list (in first-to-last order) and calls
						<a href="#TDestroy">TDestroy</a> on each individual entry. Note that this function
						expects all nodes (or their heading structure) to be of the generic
						handle datatype, otherwise the consequences would be nasty.
					</div>
					<div class="block">
						Nothing will happen if list is TNULL or if the list is empty.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								list
							</td>
							<td class="noborder">
								list to clear
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TDestroy">TDestroy</a>, 
						<a href="#TFindHandle">TFindHandle</a>, <a href="#Lists">Lists</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TNewInstance"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TNewInstance">TNewInstance</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TNewInstance - Get a module instance copy
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
<pre>
inst = TNewInstance(mod,  possize, negsize)
TAPTR               TAPTR TUINT    TUINT
</pre>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						This function creates a module instance copy. The module base
						can be duplicated alongside with a preceding function table.
					</div>
					<div class="block">
						Possize and negsize determine the size of the module base and the
						size of a preceding function table, respectively. Usually these
						arguments will be set to <code>mod-&#062;tmd_PosSize</code> and <code>mod-&#062;tmd_NegSize</code>,
						which will create an exact copy a of the module. However this
						function can be used to extend the module base and function table
						as well.
					</div>
					<div class="block">
						A pointer to the duplicated module base is returned.
						<a href="#TNewInstance">TNewInstance</a> is typically used in a module's instance open
						function.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								mod
							</td>
							<td class="noborder">
								Pointer to module base
							</td>
						</tr>
						<tr>
							<td class="noborder">
								possize
							</td>
							<td class="noborder">
								Positive size of the module, in bytes
							</td>
						</tr>
						<tr>
							<td class="noborder">
								negsize
							</td>
							<td class="noborder">
								Negative size of the module, in bytes
							</td>
						</tr>
					</table>
					<div class="block">
						The negative size is the size of the function table that
						normally precedes the module base.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>RESULTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								inst
							</td>
							<td class="noborder">
								A copy of the module base and function table, or TNULL
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TFreeInstance">TFreeInstance</a>, <a href="#TInitVectors">TInitVectors</a>, <a href="modules.html#">Module writing tutorial</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TFreeInstance"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TFreeInstance">TFreeInstance</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TFreeInstance - Free a module instance copy
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
<pre>
TFreeInstance(inst)
              TAPTR
</pre>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						This function frees a module instance. It takes into account the
						size of the module base as well as its 'negative size', i.e. the
						size of the function table that may be located in front of it.
					</div>
					<div class="block">
						This function is normally used in a module's instance close
						function.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								inst
							</td>
							<td class="noborder">
								Pointer to a module instance
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TNewInstance">TNewInstance</a>, <a href="#TInitVectors">TInitVectors</a>, <a href="modules.html#">Module writing tutorial</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TInitVectors"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TInitVectors">TInitVectors</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TInitVectors - Copy module vector table
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
<pre>
TInitVectors(mod,  vectors, numv)
             TAPTR TAPTR*   TUINT
</pre>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						This function takes a pointer to a table of function pointers
						and places them in front of a module base (in reverse order -
						a simple memory copy would be insufficient here). This function
						is normally used in a module's init function.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								mod
							</td>
							<td class="noborder">
								Module base pointer
							</td>
						</tr>
						<tr>
							<td class="noborder">
								vectors
							</td>
							<td class="noborder">
								Pointer to a table of function pointers
							</td>
						</tr>
						<tr>
							<td class="noborder">
								numv
							</td>
							<td class="noborder">
								Number of entries
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TNewInstance">TNewInstance</a>, <a href="#TFreeInstance">TFreeInstance</a>, <a href="modules.html#">Module writing tutorial</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TFindHandle"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TFindHandle">TFindHandle</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TFindHandle - Find a named handle in a list
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
<pre>
handle = TFindHandle(list,  name)
TAPTR                TLIST* TSTRPTR
</pre>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						Find the first occurance of a named handle in a list. The name
						is expected in each node's handle-&#062;thn_Data field. Only lists
						containing only nodes with a conforming object handle may be
						searched with this function. Name comparison is case-sensitive.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								list
							</td>
							<td class="noborder">
								Pointer to a list structure
							</td>
						</tr>
						<tr>
							<td class="noborder">
								name
							</td>
							<td class="noborder">
								Name of a handle to look up
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>RESULTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								handle
							</td>
							<td class="noborder">
								Ptr to named handle, or TNULL if not found in the list
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TDestroy">TDestroy</a>, 
						<a href="#TDestroyList">TDestroyList</a>, <a href="#Lists">Lists</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TForEachTag"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TForEachTag">TForEachTag</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>NAME</dfn>
				<blockquote>
					<div class="block">
						TForEachTag - Call user function for each item in a taglist
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SYNOPSIS</dfn>
				<blockquote>
<pre>
complete = TForEachTag(taglist,  function,       userdata)
TBOOL                  TTAGITEM* TTAGFOREACHFUNC TAPTR
</pre>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>FUNCTION</dfn>
				<blockquote>
					<div class="block">
						This function traverses a list of tagitems, and for each item it
						calls a user-supplied function according of the following type:
					</div>
					<blockquote>
<pre>
TCALLBACK TBOOL function(TAPTR userdata, TTAGITEM *item)
</pre>
					</blockquote>
					<div class="block">
						The userdata argument is passed to the callback function and
						otherwise remains invisible to <a href="#TForEachTag">TForEachTag</a>. The callback function
						has to return TTRUE to continue traversal, or TFALSE to abort.
					</div>
					<div class="block">
						When all items were traversed without interruption, then the
						return value from <a href="#TForEachTag">TForEachTag</a> will be TTRUE. TFALSE will be
						returned otherwise.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>INPUTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								taglist
							</td>
							<td class="noborder">
								an array of tagitems to traverse
							</td>
						</tr>
						<tr>
							<td class="noborder">
								function
							</td>
							<td class="noborder">
								callback function to call for each item traversed
							</td>
						</tr>
						<tr>
							<td class="noborder">
								userdata
							</td>
							<td class="noborder">
								user data argument passed to the callback function
							</td>
						</tr>
					</table>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>RESULTS</dfn>
				<blockquote>
					<table class="noborder">
						<tr>
							<td class="noborder">
								complete
							</td>
							<td class="noborder">
								TTRUE if the list was traversed completely
							</td>
						</tr>
					</table>
					<div class="block">
						The return value will be TFALSE if the callback function returned
						TFALSE.
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>SEE ALSO</dfn>
				<blockquote>
					<div class="block">
						<a href="#TGetTag">TGetTag</a> 
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="ABOUT"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#ABOUT">ABOUT</a></strong></td><td valign=top><a href="#TOC">Toc</a></td></tr></table><p><div class="node">
			<div class="definition"><dfn>SHORT</dfn>
				<blockquote>
					<div class="block">
						Documentation of TEKlib link libraries, and introduction
						to elementary datatypes (lists, handles, tagitems)
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>VERSION</dfn>
				<blockquote>
					<div class="block">
						$Id: teklib.html,v 1.10 2005/07/11 21:14:33 tmueller Exp $
					</div>
				</blockquote>
			</div><p>
			<div class="definition"><dfn>REVISION HISTORY</dfn>
				<blockquote>
					<div class="block">
						$Log: teklib.html,v $
						Revision 1.10  2005/07/11 21:14:33  tmueller
						fixed, re-generated
						
						Revision 1.2  2005/06/28 16:15:05  tmueller
						updated, rerendered
					</div>
					<div class="block">
						Revision 1.1  2005/06/19 20:46:04  tmueller
						moved
					</div>
					<div class="block">
						Revision 1.8  2004/06/04 00:19:31  tmueller
						Minor fixes
					</div>
					<div class="block">
						Revision 1.7  2004/04/14 22:33:41  tmueller
						Improvements
					</div>
					<div class="block">
						Revision 1.6  2004/04/14 12:46:58  tmueller
						Improved wording and corrections
					</div>
					<div class="block">
						Revision 1.5  2004/02/13 04:53:21  tmueller
						Improved wording
					</div>
					<div class="block">
						Revision 1.4  2004/02/11 15:23:26  tmueller
						Improved
					</div>
					<div class="block">
						Revision 1.3  2004/02/07 05:00:42  tmueller
						Fixed and improved
					</div>
					<div class="block">
						Revision 1.2  2004/02/06 22:16:13  tmueller
						Cleanup, redesign, introductory chapters added. <a href="#TForEachTag">TForEachTag</a> documented.
					</div>
					<div class="block">
						Revision 1.1.1.1  2003/12/11 07:17:19  tmueller
						Krypton import
					</div>
				</blockquote>
			</div><p>
		</div>
		<hr><a name="TOC"></a><table width="100%" class="head"><tr><td width="100%"><strong><a href="#INDEX">teklib</a> : <a href="#TOC">Table of contents</a></strong></td></tr></table><p><div class="node">
			<blockquote>
				<ul>
					<li class="soft">
						<a href="#ABOUT">ABOUT</a>
					</li>
					<li class="soft">
						<a href="#Handles">Handles</a>
					</li>
					<li class="soft">
						<a href="#INDEX">Index</a>
					</li>
					<li class="soft">
						<a href="#Lists">Lists</a>
					</li>
					<li class="soft">
						<a href="#Setup">Setup</a>
					</li>
					<li class="soft">
						<a href="#TAddHead">TAddHead</a>
					</li>
					<li class="soft">
						<a href="#TAddTail">TAddTail</a>
					</li>
					<li class="soft">
						<a href="#TDestroy">TDestroy</a>
					</li>
					<li class="soft">
						<a href="#TDestroyList">TDestroyList</a>
					</li>
					<li class="soft">
						<a href="#TEKCreate">TEKCreate</a>
					</li>
					<li class="soft">
						<a href="#TEKMain">TEKMain</a>
					</li>
					<li class="soft">
						<a href="#TFindHandle">TFindHandle</a>
					</li>
					<li class="soft">
						<a href="#TForEachTag">TForEachTag</a>
					</li>
					<li class="soft">
						<a href="#TFreeInstance">TFreeInstance</a>
					</li>
					<li class="soft">
						<a href="#TGetTag">TGetTag</a>
					</li>
					<li class="soft">
						<a href="#TInitList">TInitList</a>
					</li>
					<li class="soft">
						<a href="#TInitVectors">TInitVectors</a>
					</li>
					<li class="soft">
						<a href="#TInsert">TInsert</a>
					</li>
					<li class="soft">
						<a href="#TNewInstance">TNewInstance</a>
					</li>
					<li class="soft">
						<a href="#TNodeUp">TNodeUp</a>
					</li>
					<li class="soft">
						<a href="#TRemHead">TRemHead</a>
					</li>
					<li class="soft">
						<a href="#TRemTail">TRemTail</a>
					</li>
					<li class="soft">
						<a href="#TRemove">TRemove</a>
					</li>
					<li class="soft">
						<a href="#Tagitems">Tagitems</a>
					</li>
				</ul>
			</blockquote>
		</div>
		<hr>
		<p align="right">Generated Mon Jul  11 22:13:30 2005 from teklib.doc</p>
	</body>
</html>
